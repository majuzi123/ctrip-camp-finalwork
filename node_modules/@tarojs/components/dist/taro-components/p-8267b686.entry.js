import{r as t,c as e,h as i,g as s}from"./p-78e3ebb9.js";function h(t){return null!=t?t:""}const a=class{constructor(i){t(this,i),this.onInput=e(this,"input",7),this.onFocus=e(this,"focus",7),this.onBlur=e(this,"blur",7),this.onChange=e(this,"change",7),this.onLineChange=e(this,"linechange",7),this.handleInput=t=>{t.stopPropagation(),this.handleLineChange();const e=t.target.value||"";this.onInput.emit({value:e,cursor:e.length})},this.handleFocus=t=>{t.stopPropagation(),this.onFocus.emit({value:t.target.value})},this.handleBlur=t=>{t.stopPropagation(),this.onBlur.emit({value:t.target.value})},this.handleChange=t=>{t.stopPropagation(),this.onChange.emit({value:t.target.value})},this.handleLineChange=()=>{const t=this.getNumberOfLines();t!==this.line&&(this.line=t,this.onLineChange.emit({height:this.textareaRef.clientHeight,lineCount:this.line}))},this.calculateContentHeight=(t,e)=>{let i=t.style.height,s=t.offsetHeight,h=t.scrollHeight,a=t.style.overflow,o=t.style.minHeight||null;if(!(s>=h))return h;if(t.style.minHeight=0,t.style.height=s+e+"px",t.style.overflow="hidden",h<t.scrollHeight){for(;t.offsetHeight>=t.scrollHeight;)t.style.height=(s-=e)+"px";for(;t.offsetHeight<t.scrollHeight;)t.style.height=s+++"px";return t.style.height=i,t.style.overflow=a,t.style.minHeight=o,s}},this.getNumberOfLines=()=>{const t=this.textareaRef,e=window.getComputedStyle?window.getComputedStyle(t):t.style,i=parseInt(e.lineHeight,10),s=this.calculateContentHeight(t,i);return Math.floor(s/i)},this.value=void 0,this.placeholder=void 0,this.disabled=!1,this.maxlength=140,this.autoFocus=!1,this.autoHeight=!1,this.name=void 0,this.nativeProps={},this.line=1}focus(){this.textareaRef.focus()}componentDidLoad(){Object.defineProperty(this.el,"value",{get:()=>this.textareaRef.value,set:t=>this.value=t,configurable:!0}),this.autoFocus&&this.textareaRef.focus()}render(){const{value:t,placeholder:e,disabled:s,maxlength:a,autoFocus:o,autoHeight:n,name:r,nativeProps:u,handleInput:l,handleFocus:c,handleBlur:d,handleChange:p}=this,g={};return n&&(g.rows=this.line),i("textarea",Object.assign({ref:t=>{t&&(this.textareaRef=t)},class:"taro-textarea "+(n?"auto-height":""),value:h(t),placeholder:e,name:r,disabled:s,maxlength:a,autofocus:o,onInput:l,onFocus:c,onBlur:d,onChange:p},u,g))}get el(){return s(this)}};a.style="taro-textarea-core{display:block;width:300px}taro-textarea-core .auto-height{height:auto}.taro-textarea{display:block;position:relative;border:0;width:100%;height:inherit;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:auto;line-height:1.5}.taro-textarea:focus{outline:none}";export{a as taro_textarea_core}