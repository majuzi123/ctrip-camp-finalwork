import{r as t,c as s,h as i,g as h}from"./p-78e3ebb9.js";const e=class{constructor(i){t(this,i),this.onSubmit=s(this,"submit",7),this.value={}}onButtonSubmit(t){t.stopPropagation(),this.value=this.getFormValue(),this.onSubmit.emit({value:this.value})}onButtonReset(t){t.stopPropagation(),this.form.reset()}componentDidLoad(){this.value=this.getFormValue(),Object.defineProperty(this.el,"value",{get:()=>this.value,configurable:!0})}componentDidRender(){if(this.originalAppendChild||(this.originalAppendChild=this.el.appendChild,this.originalInsertBefore=this.el.insertBefore,this.originalReplaceChild=this.el.replaceChild,this.originalRemoveChild=this.el.removeChild),!this.form)return this.el.appendChild=this.originalAppendChild,this.el.insertBefore=this.originalInsertBefore,this.el.replaceChild=this.originalReplaceChild,void(this.el.removeChild=this.originalRemoveChild);this.el.appendChild=t=>this.form.appendChild(t),this.el.insertBefore=(t,s)=>this.form.insertBefore(t,s),this.el.replaceChild=(t,s)=>this.form.replaceChild(t,s),this.el.removeChild=t=>this.form.removeChild(t)}getFormValue(){const t=this.el,s=[],i=t.getElementsByTagName("input");for(let t=0;t<i.length;t++)s.push(i[t]);const h={},e={};s.forEach((t=>{"string"==typeof t.name&&(-1===t.className.indexOf("weui-switch")?"radio"!==t.type?"checkbox"!==t.type?h[t.name]=t.value:t.checked?e[t.name]?h[t.name].push(t.value):(e[t.name]=!0,h[t.name]=[t.value]):e[t.name]||(h[t.name]=[]):t.checked?(e[t.name]=!0,h[t.name]=t.value):e[t.name]||(h[t.name]=""):h[t.name]=t.checked)}));const o=t.getElementsByTagName("textarea"),r=[];for(let t=0;t<o.length;t++)r.push(o[t]);return r.forEach((t=>{"string"==typeof t.name&&(h[t.name]=t.value)})),h}render(){return i("form",{ref:t=>{this.form=t}},i("slot",null))}get el(){return h(this)}};export{e as taro_form_core}