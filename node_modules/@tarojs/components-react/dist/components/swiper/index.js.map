{"version":3,"file":"index.js","sources":["../../../src/components/swiper/index.tsx"],"sourcesContent":["import 'swiper/swiper-bundle.min.css'\nimport 'weui'\nimport './style/index.css'\n\nimport classNames from 'classnames'\nimport React from 'react'\nimport Swipers from 'swiper/swiper-bundle.esm.js'\n\nimport { debounce } from '../../utils'\n\nimport type ISwiper from 'swiper'\n\nlet INSTANCE_ID = 0\n\ninterface SwiperItemProps extends React.HTMLAttributes<HTMLDivElement> {\n  itemId: string\n}\n\ninterface SwiperProps extends React.HTMLAttributes<HTMLDivElement> {\n  autoplay?: boolean\n  interval?: number\n  duration?: number\n  current?: number\n  displayMultipleItems?: number\n  circular?: boolean\n  vertical?: boolean\n  spaceBetween?: any\n  previousMargin?: string\n  nextMargin?: string\n  indicatorColor?: string\n  indicatorActiveColor?: string\n  indicatorDots?: boolean\n  onAnimationFinish?: (e: TouchEvent) => void\n}\n\nconst createEvent = (type: string) => {\n  let e\n  try {\n    e = new TouchEvent(type)\n  } catch (err) {\n    e = document.createEvent('Event')\n    e.initEvent(type, true, true)\n  }\n  return e\n}\n\nclass SwiperItem extends React.Component<SwiperItemProps, Record<string, unknown>> {\n  render () {\n    const { className, style, itemId, children, ...restProps } = this.props\n    const cls = classNames('swiper-slide', className)\n    return (\n      <div\n        className={cls}\n        style={style}\n        item-id={itemId}\n        {...restProps}\n      >\n        {children}\n      </div>\n    )\n  }\n}\n\nclass Swiper extends React.Component<SwiperProps, Record<string, unknown>> {\n  _id = 1 + INSTANCE_ID++\n  _$current = 0\n  _$width = 0\n  _$height = 0\n  $el: HTMLDivElement | null\n  mySwiper: ISwiper\n  observer: MutationObserver\n  observerFirst: MutationObserver\n  observerLast: MutationObserver\n\n  componentDidMount () {\n    const {\n      autoplay = false,\n      circular = true,\n      current = 0,\n      displayMultipleItems = 1,\n      duration = 500,\n      interval = 5000,\n      spaceBetween,\n      vertical\n    } = this.props\n\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const that = this\n    const opt: Record<string, any> = {\n      // 指示器\n      pagination: { el: `.taro-swiper-${this._id} > .swiper-container > .swiper-pagination` },\n      direction: vertical ? 'vertical' : 'horizontal',\n      loop: circular,\n      slidesPerView: parseFloat(String(displayMultipleItems)),\n      initialSlide: parseInt(String(current), 10),\n      speed: parseInt(String(duration), 10),\n      observer: true,\n      observeParents: true,\n      on: {\n        slideChange () {\n          const e = createEvent('touchend')\n          try {\n            Object.defineProperty(e, 'detail', {\n              enumerable: true,\n              value: {\n                current: this.realIndex\n              }\n            })\n          } catch (err) {} // eslint-disable-line no-empty\n          that._$current = this.realIndex\n          that.handleOnChange(e)\n        },\n        transitionEnd () {\n          const e = createEvent('touchend')\n          try {\n            Object.defineProperty(e, 'detail', {\n              enumerable: true,\n              value: {\n                current: this.mySwiper.realIndex\n              }\n            })\n            if (this.mySwiper.isBeginning) {\n              this.mySwiper.slideToLoop((this.props.children as any).length - 1, 0)\n            } else if (this.mySwiper.isEnd) {\n              this.mySwiper.slideToLoop(0, 0)\n            }\n          } catch (err) {} // eslint-disable-line no-empty\n          that.handleOnAnimationFinish(e)\n        },\n        observerUpdate (_swiper: ISwiper, e) {\n          const target = e.target\n          const className = target && typeof target.className === 'string' ? target.className : ''\n          if (className.includes('taro_page') && target.style.display !== 'none') {\n            if (that.props.autoplay && target.contains(_swiper.$el[0])) {\n              if (that.props.circular) {\n                _swiper.slideToLoop(this.realIndex, 0) // 更新下标\n              } else {\n                _swiper.slideTo(this.realIndex)\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // 自动播放\n    if (autoplay) {\n      opt.autoplay = {\n        delay: parseInt(String(interval), 10),\n        disableOnInteraction: false\n      }\n    }\n\n    // 两端距离\n    if (spaceBetween) {\n      opt.spaceBetween = spaceBetween\n    }\n\n    this.mySwiper = new Swipers(this.$el!, opt)\n    setTimeout(() => {\n      this.mySwiper.update()\n    }, 500)\n\n    if (!this.mySwiper || !this.props.circular) return\n\n    const wrapper = this.mySwiper.$wrapperEl[0]\n    this.observer = new MutationObserver(this.handleSwiperLoopListen)\n\n    this.observer.observe(wrapper, {\n      childList: true\n    })\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (this.mySwiper) {\n      const nextCurrent = typeof nextProps.current === 'number' ? nextProps.current : this._$current || 0\n\n      this.handleSwiperLoop()\n      // 是否衔接滚动模式\n      if (nextProps.circular) {\n        if (!this.mySwiper.isBeginning && !this.mySwiper.isEnd) {\n          this.mySwiper.slideToLoop(parseInt(nextCurrent, 10)) // 更新下标\n        }\n      } else {\n        this.mySwiper.slideTo(parseInt(nextCurrent, 10) + 1) // 更新下标\n      }\n\n      const autoplay = this.mySwiper.autoplay\n      // 判断是否需要停止或开始自动轮播\n      if (autoplay.running !== nextProps.autoplay) {\n        if (nextProps.autoplay) {\n          if (typeof this.mySwiper.params.autoplay === 'object') {\n            this.mySwiper.params.autoplay.disableOnInteraction = false\n            this.mySwiper.params.autoplay.delay = parseInt(String(this.props.interval) || '3000', 10)\n          }\n          autoplay.start()\n        } else {\n          autoplay.stop()\n        }\n      }\n\n      this.mySwiper.update() // 更新子元素\n    }\n  }\n\n  componentDidUpdate (preProps) {\n    if (preProps.children.length === 0 && (this.props.children as any).length > 0) {\n      (this.mySwiper as any).loopDestroy()\n      ;(this.mySwiper as any).loopCreate()\n    }\n    if (!this.mySwiper) return\n    if (this.props.autoplay) {\n      if (this._$width !== this.mySwiper.width || this._$height !== this.mySwiper.height) {\n        this.mySwiper.autoplay.start()\n      }\n    }\n    this._$width = this.mySwiper.width\n    this._$height = this.mySwiper.height\n  }\n\n  componentWillUnmount () {\n    this.$el = null\n    if (this.mySwiper) this.mySwiper.destroy()\n    this.observer?.disconnect?.()\n    this.observerFirst?.disconnect?.()\n    this.observerLast?.disconnect?.()\n  }\n\n  handleOnChange (e: React.FormEvent<HTMLDivElement>) {\n    const func = this.props.onChange\n    typeof func === 'function' && func(e)\n  }\n\n  handleOnAnimationFinish (e: TouchEvent) {\n    const func = this.props.onAnimationFinish\n    typeof func === 'function' && func(e)\n  }\n\n  parsePX (s = '0px') {\n    return parseFloat(s.replace(/r*px/i, ''))\n  }\n\n  handleSwiperLoopListen = () => {\n    this.observerFirst?.disconnect?.()\n    this.observerLast?.disconnect?.()\n    this.observerFirst = new MutationObserver(this.handleSwiperLoop)\n    this.observerLast = new MutationObserver(this.handleSwiperLoop)\n    const wrapper = this.mySwiper.$wrapperEl[0]\n    const list = wrapper.querySelectorAll('taro-swiper-item-core:not(.swiper-slide-duplicate)')\n    if (list.length >= 1) {\n      this.observerFirst.observe(list[0], {\n        characterData: true\n      })\n    } else if (list.length >= 2) {\n      this.observerLast.observe(list[list.length - 1], {\n        characterData: true\n      })\n    }\n  }\n\n  handleSwiperLoop = debounce(() => {\n    if (this.mySwiper && this.mySwiper.$wrapperEl && this.props.circular) {\n      // @ts-ignore\n      this.mySwiper.loopDestroy()\n      // @ts-ignore\n      this.mySwiper.loopCreate()\n    }\n  }, 500)\n\n  render () {\n    const {\n      className,\n      style,\n      vertical,\n      previousMargin,\n      nextMargin,\n      indicatorColor,\n      indicatorActiveColor\n    } = this.props\n    const defaultIndicatorColor = indicatorColor || 'rgba(0, 0, 0, .3)'\n    const defaultIndicatorActiveColor = indicatorActiveColor || '#000'\n    const cls = classNames(`taro-swiper-${this._id}`, className)\n    const sty = Object.assign({\n      paddingTop: vertical ? this.parsePX(previousMargin) : 0,\n      paddingRight: vertical ? 0 : this.parsePX(nextMargin),\n      paddingBottom: vertical ? this.parsePX(nextMargin) : 0,\n      paddingLeft: vertical ? 0 : this.parsePX(previousMargin),\n      overflow: 'hidden'\n    }, style)\n    const paginationCls = classNames(\n      'swiper-pagination',\n      {\n        'swiper-pagination-hidden': !this.props.indicatorDots,\n        'swiper-pagination-bullets': this.props.indicatorDots\n      }\n    )\n    return (\n      <div className={`swiper-container-wrapper ${cls}`} style={sty}>\n        <div className='swiper-container' style={{ overflow: 'visible' }} ref={(el) => { this.$el = el }}>\n          <div\n            dangerouslySetInnerHTML={{\n              __html: `<style type='text/css'>\n              .taro-swiper-${this._id} > .swiper-container > .swiper-pagination > .swiper-pagination-bullet { background: ${defaultIndicatorColor} }\n              .taro-swiper-${this._id} > .swiper-container > .swiper-pagination > .swiper-pagination-bullet-active { background: ${defaultIndicatorActiveColor} }\n              </style>`\n            }}\n          />\n          <div className='swiper-wrapper'>{this.props.children}</div>\n          <div className={paginationCls} />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport { Swiper, SwiperItem }\n"],"names":["INSTANCE_ID","createEvent","type","e","TouchEvent","err","document","initEvent","SwiperItem","_a","props","className","style","itemId","children","restProps","__rest","cls","classNames","React","createElement","Object","assign","Component","Swiper","_id","_$current","_$width","_$height","handleSwiperLoopListen","_b","observerFirst","disconnect","_d","observerLast","_c","MutationObserver","handleSwiperLoop","wrapper","mySwiper","$wrapperEl","list","querySelectorAll","length","observe","characterData","debounce","circular","loopDestroy","loopCreate","autoplay","current","displayMultipleItems","duration","interval","spaceBetween","vertical","that","opt","pagination","el","direction","loop","slidesPerView","parseFloat","String","initialSlide","parseInt","speed","observer","observeParents","on","slideChange","defineProperty","enumerable","value","realIndex","handleOnChange","transitionEnd","isBeginning","slideToLoop","isEnd","handleOnAnimationFinish","observerUpdate","_swiper","target","includes","display","contains","$el","slideTo","delay","disableOnInteraction","Swipers","setTimeout","update","childList","nextProps","nextCurrent","running","params","start","stop","preProps","width","height","destroy","_f","_e","func","onChange","onAnimationFinish","s","replace","previousMargin","nextMargin","indicatorColor","indicatorActiveColor","defaultIndicatorColor","defaultIndicatorActiveColor","sty","paddingTop","parsePX","paddingRight","paddingBottom","paddingLeft","overflow","paginationCls","indicatorDots","ref","dangerouslySetInnerHTML","__html"],"mappings":"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"}