{"version":3,"file":"pages/comment-list/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AATA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AATA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAVA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAVA;AAAA;AAAA;AAWA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;;;;;;;;;;;;;;;;;AClIA;AACA;AACA;AACA;;AAEA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AAGA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAIA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAKA;;;;;;;;;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAGA","sources":["webpack://xiecheng-final-work/._src_pages_comment-list_index.jsx","webpack://xiecheng-final-work/._src_components_CommentListCard_index.jsx","webpack://xiecheng-final-work/./src/pages/comment-list/index.jsx?f658","webpack://xiecheng-final-work/._node_modules_classnames_index.js"],"sourcesContent":["import { Component, useState } from 'react'\r\nimport { View, Text, Input, Button, Checkbox, Icon, ScrollView } from '@tarojs/components'\r\nimport Taro, { useLoad } from '@tarojs/taro';\r\nimport classnames from 'classnames'\r\nimport './index.scss'\r\nimport CommentListCard from '../../components/CommentListCard';\r\n\r\nexport default function Index() {\r\n\r\n  // const [CommentsList, setCommentList] = useState([{\r\n  //   commentId: \"0001\",\r\n  //   nickname:'一号用户',\r\n  //   userImg:'https://mp-32c7feb5-a197-4820-b874-2ef762f317e6.cdn.bspapp.com/cloudstorage/cf91eed7-8704-4a26-bdaf-4085f7a7ca7e.jpeg',\r\n  //   userTag1:'白银贵宾',\r\n  //   userTag2:'点评新星',\r\n  //   liveTime:'2023年04月',\r\n  //   location:'浙江',\r\n  //   fangxing:'畅享大床房',\r\n  //   leibie:'独自旅行',\r\n  //   content:'入住的酒店大厅看起来很舒适，前台的小姐姐服务业很好，酒店的环境也是一级棒，总之强烈推荐，欢迎大家前来入住！',\r\n  //   star:5.0,\r\n  //   ImgList:['https://mp-32c7feb5-a197-4820-b874-2ef762f317e6.cdn.bspapp.com/cloudstorage/0b5cf52c-4927-480b-9b96-f2e25dbad30f.jpg','https://mp-32c7feb5-a197-4820-b874-2ef762f317e6.cdn.bspapp.com/cloudstorage/1545634f-3b76-4d12-a87e-f34c774e5984.jpg',\r\n  //   'https://fuss10.elemecdn.com/a/3f/3302e58f9a181d2509f3dc0fa68b0jpeg.jpeg','https://fuss10.elemecdn.com/0/6f/e35ff375812e6b0020b6b4e8f9583jpeg.jpeg','https://fuss10.elemecdn.com/d/e6/c4d93a3805b3ce3f323f7974e6f78jpeg.jpeg'],\r\n  //   reply:'酒店回复：感谢对我们酒店的认可，您的鼓励是我们前进的动力，有机会暑假再来玩呀！'\r\n  // }, {\r\n  //   commentId: \"0002\",\r\n  //   nickname:'二号用户',\r\n  //   userImg:'https://mp-32c7feb5-a197-4820-b874-2ef762f317e6.cdn.bspapp.com/cloudstorage/cf91eed7-8704-4a26-bdaf-4085f7a7ca7e.jpeg',\r\n  //   userTag1:'白银贵宾',\r\n  //   userTag2:'点评新星',\r\n  //   liveTime:'2023年04月',\r\n  //   location:'浙江',\r\n  //   fangxing:'畅享大床房',\r\n  //   leibie:'独自旅行',\r\n  //   content:'入住的酒店大厅看起来很舒适，前台的小姐姐服务业很好，酒店的环境也是一级棒，总之强烈推荐，欢迎大家前来入住！',\r\n  //   star:5.0,\r\n  //   ImgList:['https://mp-32c7feb5-a197-4820-b874-2ef762f317e6.cdn.bspapp.com/cloudstorage/0b5cf52c-4927-480b-9b96-f2e25dbad30f.jpg','https://mp-32c7feb5-a197-4820-b874-2ef762f317e6.cdn.bspapp.com/cloudstorage/1545634f-3b76-4d12-a87e-f34c774e5984.jpg',\r\n  //   'https://fuss10.elemecdn.com/a/3f/3302e58f9a181d2509f3dc0fa68b0jpeg.jpeg','https://fuss10.elemecdn.com/0/6f/e35ff375812e6b0020b6b4e8f9583jpeg.jpeg','https://fuss10.elemecdn.com/d/e6/c4d93a3805b3ce3f323f7974e6f78jpeg.jpeg'],\r\n  //   reply:'酒店回复：感谢对我们酒店的认可，您的鼓励是我们前进的动力，有机会暑假再来玩呀！'\r\n  // }]);\r\n  // useLoad(() => {\r\n  // })\r\n  const [CommentsList, setCommentList] = useState([]);\r\n  const [loading, setLoading] = useState(true)\r\n  const [index, setIndex] = useState(0)\r\n  const [hotelName, setHotelName] = useState('未知酒店');\r\n  const [hotelId, setHotelId] = useState('');\r\n  const [page, setPage] = useState(0);\r\n  const [allcount, setAllcount] = useState(0);\r\n  const [photocount, setPhotocount] = useState(0);\r\n  const [badcount, setBadcount] = useState(0);\r\n  const [scroll, setScroll] = useState(1)//滚动条高度，用于回到顶部\r\n  Taro.setNavigationBarTitle({\r\n    title: hotelName\r\n  })\r\n  useLoad(async (options) => {\r\n    setAllcount((await Taro.cloud.callFunction({ name: 'get-comment-list', data: { index: 0, hotelId: options.hotelId } })).result.total)\r\n    setPhotocount((await Taro.cloud.callFunction({ name: 'get-comment-list', data: { index: 1, hotelId: options.hotelId } })).result.total)\r\n    setBadcount((await Taro.cloud.callFunction({ name: 'get-comment-list', data: { index: 2, hotelId: options.hotelId } })).result.total)\r\n    //console.log(allcount)\r\n\r\n    setHotelName(options.hotelName)\r\n    setHotelId(options.hotelId)\r\n    console.log(options.hotelId)\r\n    const comments = (await Taro.cloud.callFunction({ name: 'get-bad-comment', data: { page: page, index: index, hotelId: options.hotelId } })).result\r\n    console.log(comments)\r\n    setCommentList(comments)\r\n    setLoading(false)\r\n  })\r\n\r\n  const appendComments = async () => {\r\n    setLoading(true)\r\n    console.log(index)\r\n    const comments = (await Taro.cloud.callFunction({ name: 'get-bad-comment', data: { page: page + 1, index: index, hotelId: hotelId } })).result\r\n    setPage(page + 1)\r\n\r\n    console.log(comments)\r\n    setCommentList(CommentsList.concat(comments))\r\n    setLoading(false)\r\n  }\r\n  const onClickAll = async () => {\r\n    setPage(0)\r\n    setIndex(0)\r\n    const comments = (await Taro.cloud.callFunction({ name: 'get-bad-comment', data: { page: 0, index: 0, hotelId: hotelId } })).result\r\n    console.log(comments)\r\n    setCommentList(comments)\r\n    setLoading(false)\r\n    setScroll((scroll + 1 - Math.random()) % 1)//回滚至顶部，state值发生改变才会触发\r\n\r\n  }\r\n  const onClickPhoto = async () => {\r\n\r\n    setPage(0)\r\n    setIndex(1)\r\n    const comments = (await Taro.cloud.callFunction({ name: 'get-bad-comment', data: { page: 0, index: 1, hotelId: hotelId } })).result\r\n    console.log(comments)\r\n    setCommentList(comments)\r\n    setLoading(false)\r\n    setScroll((scroll + 1 - Math.random()) % 1)//回滚至顶部，state值发生改变才会触发\r\n\r\n  }\r\n  const onClickBad = async () => {\r\n    setPage(0)\r\n    setIndex(2)\r\n    const comments = (await Taro.cloud.callFunction({ name: 'get-bad-comment', data: { page: 0, index: 2, hotelId: hotelId } })).result\r\n    console.log(comments)\r\n    setCommentList(comments)\r\n    setLoading(false)\r\n    setScroll((scroll + 1 - Math.random()) % 1)//回滚至顶部，state值发生改变才会触发\r\n\r\n    //console.log(index)\r\n  }\r\n  return (\r\n    <View className='hotal-list-page'>\r\n      <View className='fenlei'>\r\n        <View onClick={() => onClickAll()} className={index == 0 ? 'shaixuan' : ''}>全部{allcount}</View>\r\n        <View onClick={() => onClickPhoto()} className={index == 1 ? 'shaixuan' : ''}>有图·视频{photocount}</View>\r\n        <View onClick={() => onClickBad()} className={index == 2 ? 'shaixuan' : ''}>差评{badcount}</View>\r\n        <View>筛选</View>\r\n      </View>\r\n      <ScrollView className='hotel-cards' scrollY onScrollToLower={(appendComments)} scrollTop={scroll}>\r\n        {Array.isArray(CommentsList) && CommentsList.map((item) => (\r\n          <CommentListCard commentDetails={item} ></CommentListCard>\r\n        ))}\r\n        <View className='loading' hidden={loading}>正在加载评论数据...</View>\r\n      </ScrollView>\r\n      <Button className='tiaozhuan' onClick={() => Taro.navigateTo({ url: '../comment-submit/index?hotelId=' + hotelId + '&hotelName=' + hotelName })}>匿名点评</Button>\r\n    </View>\r\n  )\r\n\r\n}\r\n\r\n","import { View, Image, Text ,Button} from '@tarojs/components'\r\nimport { useState } from 'react'\r\nimport './index.scss'\r\nimport StarsScore from '../../components/StarsScore';\r\n\r\n// {/* This is a card, component of comment list page. */}\r\nexport default function CommentListCard({\r\n    commentDetails\r\n    \r\n}) {\r\n    const nickname='未知用户'\r\n    const userImg='https://mp-32c7feb5-a197-4820-b874-2ef762f317e6.cdn.bspapp.com/cloudstorage/cf91eed7-8704-4a26-bdaf-4085f7a7ca7e.jpeg'\r\n    const userTag1='白银贵宾'\r\n    const userTag2='点评新星'\r\n    const liveTime=new Date(commentDetails.liveTime)\r\n    const location='浙江'\r\n    const fangxing='畅享大床房'\r\n    const leibie='独自旅行'\r\n    const content='入住的酒店大厅看起来很舒适，前台的小姐姐服务业很好，酒店的环境也是一级棒，总之强烈推荐，欢迎大家前来入住！'\r\n    const star=5.0\r\n    const ImgList=['https://mp-32c7feb5-a197-4820-b874-2ef762f317e6.cdn.bspapp.com/cloudstorage/0b5cf52c-4927-480b-9b96-f2e25dbad30f.jpg','https://mp-32c7feb5-a197-4820-b874-2ef762f317e6.cdn.bspapp.com/cloudstorage/1545634f-3b76-4d12-a87e-f34c774e5984.jpg',\r\n    'https://fuss10.elemecdn.com/a/3f/3302e58f9a181d2509f3dc0fa68b0jpeg.jpeg','https://fuss10.elemecdn.com/0/6f/e35ff375812e6b0020b6b4e8f9583jpeg.jpeg','https://fuss10.elemecdn.com/d/e6/c4d93a3805b3ce3f323f7974e6f78jpeg.jpeg']\r\n    const reply='酒店回复：感谢对我们酒店的认可，您的鼓励是我们前进的动力，有机会暑假再来玩呀！'\r\n    return (\r\n        <View className='hotel-card'>\r\n            <View className=\"homeContainer\">\r\n\t\t<View className=\"upperContent\">\r\n\t\t\t<View class=\"opusDetailItem\">\r\n\t\t\t\t<Image src={userImg} alt=\"头像\" mode=\"widthFix\"></Image>\r\n                <View className='columnItem'>\r\n                <View className='userInfo'>\r\n\t\t\t\t\t<View className=\"opusDetailTitle\">{commentDetails.nickname}</View>\r\n\t\t\t\t\t<View className=\"bodyTopic\">\r\n                    <View className=\"bodyTopicItem\">\r\n\t\t\t\t\t\t{userTag1}\r\n\t\t\t\t\t</View>\r\n                    <View className=\"bodyTopicItem\">\r\n\t\t\t\t\t\t{userTag2}\r\n\t\t\t\t\t</View>\r\n\t\t\t\t\t\r\n                   \r\n\t\t\t\t</View>\r\n                </View>\r\n                <View className='liveTime'>{liveTime.getFullYear()}年{liveTime.getMonth()+1}月入住 | 发布于{commentDetails.location}</View>\r\n                </View>\r\n\t\t\t</View>\r\n            <View className='rowItem'>\r\n                <Image className='starImage' src='https://mp-32c7feb5-a197-4820-b874-2ef762f317e6.cdn.bspapp.com/cloudstorage/cbf68cf8-1f53-4f6c-b57c-b03f45d8aa51.png'></Image>\r\n                <View className=\"starItem\">\r\n\t\t\t\t\t\t{commentDetails.star}.0分\r\n\t\t\t\t\t</View>\r\n                    <View className='fangxing'>{fangxing}</View>\r\n                    <View className='leibie'>| {leibie}</View>\r\n            </View>\r\n            <View className='comment'>{commentDetails.content}</View>\r\n            \r\n          \r\n        \r\n            <View className='qz_imgs qz_imgs3 clearfix'>\r\n                {Array.isArray(commentDetails.ImgList) ? commentDetails.ImgList.map((item) => (\r\n          <Image className='tupian' src={item}></Image>\r\n        )) : null}\r\n            </View>\r\n            <View className='reply'>{reply}</View>\r\n            <View className='youyong'><View className='youyongText'>▲有用3</View></View>\r\n            </View>\r\n            </View>\r\n          \r\n         \r\n        </View>\r\n    )\r\n}","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[5].use[0]!./index.jsx\"\nvar config = {\"navigationBarTitleText\":\"上海虹桥国展地铁站@酒店\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/comment-list/index', {root:{cn:[]}}, config || {}))\n\n\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"names":[],"sourceRoot":""}