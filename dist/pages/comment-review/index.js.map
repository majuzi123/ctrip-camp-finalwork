{"version":3,"file":"pages/comment-review/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AAEA;AAEA;AAAA;AAAA;AAAA;AAEA;AAGA;AAAA;AAGA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AAEA;AAAA;AAEA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAGA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAGA;AAEA;AAAA;AAAA;AACA;AAAA;AAGA;AAAA;AAIA;AAGA;AAAA;AACA;AAGA;;;;;;;;;;;;;ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://xiecheng-final-work/._src_pages_comment-review_index.jsx","webpack://xiecheng-final-work/./src/pages/comment-review/index.jsx?8d65"],"sourcesContent":["import { View, Image, Button } from \"@tarojs/components\";\r\nimport \"./index.scss\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Taro from \"@tarojs/taro\";\r\nimport dayjs from \"dayjs\";\r\n\r\nexport default function Comment() {\r\n  const tabbar = [\"未审核\", \"审核通过\", \"审核未通过\"];\r\n  const [activeTabbarIndex, setActiveTabbarIndex] = useState(0);\r\n  const [commentlist, setCommentList] = useState([]);\r\n\r\n  const tabbarChange = (index) => {\r\n    setActiveTabbarIndex(index);\r\n  };\r\n\r\n  const getData = () => {\r\n    Taro.cloud.init({ env: \"cloud-3g1s9anved8781a2\" });\r\n\r\n    Taro.cloud\r\n      .callFunction({\r\n        name: \"getcomment\",\r\n        data: {\r\n          index: activeTabbarIndex,\r\n        },\r\n      })\r\n      .then((res) => {\r\n        setCommentList(res.result.data);\r\n      });\r\n  };\r\n\r\n  const checkHandle = (pass, _id) => {\r\n    Taro.cloud.init({\r\n      env: \"cloud-3g1s9anved8781a2\",\r\n    });\r\n\r\n    Taro.cloud.callFunction({\r\n      name: \"update-comment\",\r\n      data: {\r\n        _id,\r\n        pass,\r\n      },\r\n      success: function (res) {\r\n        console.log(res);\r\n        getData()\r\n      },\r\n      fail: console.error,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [activeTabbarIndex]);\r\n\r\n  return (\r\n    <View className=\"wrapper\">\r\n      <View className=\"tabbar\">\r\n        {tabbar.map((item, index) => {\r\n          return (\r\n            <View\r\n              className={`tabbar-item ${index === activeTabbarIndex ? \"active\" : \"\"\r\n                }`}\r\n              onClick={() => tabbarChange(index)}\r\n            >\r\n              {item}\r\n            </View>\r\n          );\r\n        })}\r\n      </View>\r\n\r\n      <View className=\"list\">\r\n        {commentlist.map((item, index) => {\r\n          return (\r\n            <View className=\"item\">\r\n              <View>序号:{index + 1}</View>\r\n              <View className=\"info\">\r\n                <Image className=\"head\" src={item.userImg} />\r\n                <View className=\"headinfo\">\r\n                  <View>{item.nickname}</View>\r\n                  <View className=\"timeorplace\">\r\n                    {dayjs(item.liveTime).format(\"YYYY年MM月\")}入住|发布于\r\n                    {item.location}\r\n                  </View>\r\n                </View>\r\n              </View>\r\n              <View>{item.content}</View>\r\n\r\n              <View className=\"imglist\">\r\n                {item.ImgList.map((item) => {\r\n                  return <Image src={item} />;\r\n                })}\r\n              </View>\r\n              {activeTabbarIndex === 0 ? (\r\n                <View className=\"func\">\r\n                  <Button\r\n                    onClick={() => checkHandle(true, item._id)}\r\n                    class=\"Pass\"\r\n                  >\r\n                    审核通过\r\n                  </Button>\r\n                  <Button\r\n                    onClick={() => checkHandle(false, item._id)}\r\n                    class=\"Reject\"\r\n                  >\r\n                    拒绝\r\n                  </Button>\r\n                </View>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n            </View>\r\n          );\r\n        })}\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[5].use[0]!./index.jsx\"\nvar config = {\"navigationBarTitleText\":\"评论审核\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/comment-review/index', {root:{cn:[]}}, config || {}))\n\n\n"],"names":[],"sourceRoot":""}